#!/usr/bin/python

# This one off script was used to export the sounds from the smb db to individual wav
# files, which I then turned into .flac (smaller file sizes) to track via git lfs.

SOUNDS = [
    ("SMALL_JUMP"      , 0b00000000000000000000000010000000),
    ("FLAGPOLE"        , 0b00000000000000000000000001000000),
    ("FIREBALL"        , 0b00000000000000000000000000100000),
    ("PIPEDOWN_INJURY" , 0b00000000000000000000000000010000),
    ("ENEMY_SMACK"     , 0b00000000000000000000000000001000),
    ("ENEMY_STOMP_SWIM", 0b00000000000000000000000000000100),
    ("BUMP"            , 0b00000000000000000000000000000010),
    ("BIG_JUMP"        , 0b00000000000000000000000000000001),
    ("BOWSER_FALL"     , 0b00000000000000001000000000000000),
    ("EXTRA_LIFE"      , 0b00000000000000000100000000000000),
    ("GRAB_POWER_UP"   , 0b00000000000000000010000000000000),
    ("TIMERTICK"       , 0b00000000000000000001000000000000),
    ("BLAST"           , 0b00000000000000000000100000000000),
    ("GROW_VINE"       , 0b00000000000000000000010000000000),
    ("GROW_POWER_UP"   , 0b00000000000000000000001000000000),
    ("GRAB_COIN"       , 0b00000000000000000000000100000000),
    ("BOWSER_FLAME"    , 0b00000000100000000000000000000000),
    ("BRICK_SHATTER"   , 0b00000000010000000000000000000000),
]

MUSIC = [
    ("STAR_POWER"          , 0b00000000000000000000000001000000), 
    ("PIPE_INTRO"          , 0b00000000000000000000000000100000),
    ("CLOUD"               , 0b00000000000000000000000000010000),
    ("CASTLE"              , 0b00000000000000000000000000001000),
    ("UNDERGROUND"         , 0b00000000000000000000000000000100),
    ("WATER"               , 0b00000000000000000000000000000010),
    ("GROUND"              , 0b00000000000000000000000000000001),
    ("TIME_RUNNING_OUT"    , 0b00000000000000000100000000000000),
    ("END_OF_LEVEL"        , 0b00000000000000000010000000000000),
    ("ALT_GAME_OVER"       , 0b00000000000000000001000000000000),
    ("END_OF_CASTLE"       , 0b00000000000000000000100000000000), 
    ("VICTORY"             , 0b00000000000000000000010000000000),
    ("GAME_OVER"           , 0b00000000000000000000001000000000),
    ("DEATH_MUSIC"         , 0b00000000000000000000000100000000),
]

import sqlite3
con = sqlite3.connect("/home/matthew/.argos/smb.db")
cur = con.cursor()

for name, val in SOUNDS:
    fname = f"SMB_SOUND_{val:06x}.wav"
    dat = cur.execute("SELECT wav_data FROM sound_effect WHERE effect = ?", (val,)).fetchone()[0]
    with open(fname, "wb") as b:
        b.write(dat)

for name, val in MUSIC:
    fname = f"SMB_MUSIC_{val:06x}.wav"
    dat = cur.execute("SELECT wav_data FROM music_track WHERE track = ?", (val,)).fetchone()[0]
    with open(fname, "wb") as b:
        b.write(dat)
